const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UpsertApiDocs--ks4MpKl.js","./index-BXdnPgBO.js","./index-wnKjfGML.css","./SearchApiDocs-bPNlciTI.js","./ViewApiDocs-Bo3U9UfP.js","./DeleteApiDocs-dlcwSgjR.js"])))=>i.map(i=>d[i]);
import{S as ce,i as de,s as fe,O as he,d as x,t as Z,a as X,m as ee,c as te,_ as me,L as se,h as y,M as be,N as We,C as ge,P as Ge,D as ve,l as k,n as o,u,v as z,w as c,H as q,o as H,y as ne,Q as re,k as oe,R as ue,T as Ye,a7 as ye,j as pe,z as $,a8 as we,q as Ke,a9 as Qe,A as L,p as _e,aa as Xe,I as K,$ as ke,a3 as ae,ab as Ze,J as ie,ac as $e,E as xe,a0 as et,Z as tt,U as lt,V as nt,W as st,X as at,Y as it,ad as rt,ae as ot,a6 as ze}from"./index-BXdnPgBO.js";function Ve(s,e,t){const n=s.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function ct(s){s[15]=s[16].default}function Se(s,e,t){const n=s.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function Pe(s,e){let t,n,l;function a(){return e[7](e[11])}return{key:s,first:null,c(){t=u("button"),t.textContent=`${e[12].label} `,c(t,"type","button"),c(t,"class","sidebar-item"),oe(t,"active",e[2]===e[11]),this.first=t},m(i,d){k(i,t,d),n||(l=H(t,"click",a),n=!0)},p(i,d){e=i,d&12&&oe(t,"active",e[2]===e[11])},d(i){i&&y(t),n=!1,l()}}}function Ce(s){let e,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:ut,then:ft,catch:dt,value:16,blocks:[,,,]};return Ye(s[12].component,n),{c(){e=ue(),n.block.c()},m(l,a){k(l,e,a),n.block.m(l,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(l,a){s=l},i(l){t||(X(n.block),t=!0)},o(l){for(let a=0;a<3;a+=1){const i=n.blocks[a];Z(i)}t=!1},d(l){l&&y(e),n.block.d(l),n.token=null,n=null}}}function dt(s){return{c:q,m:q,i:q,o:q,d:q}}function ft(s){ct(s);let e,t,n;return e=new s[15]({}),{c(){te(e.$$.fragment),t=z()},m(l,a){ee(e,l,a),k(l,t,a),n=!0},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){Z(e.$$.fragment,l),n=!1},d(l){l&&y(t),x(e,l)}}}function ut(s){return{c:q,m:q,i:q,o:q,d:q}}function Ue(s,e){let t,n,l,a=e[2]===e[11]&&Ce(e);return{key:s,first:null,c(){t=ue(),a&&a.c(),n=ue(),this.first=t},m(i,d){k(i,t,d),a&&a.m(i,d),k(i,n,d),l=!0},p(i,d){e=i,e[2]===e[11]?a?(a.p(e,d),d&4&&X(a,1)):(a=Ce(e),a.c(),X(a,1),a.m(n.parentNode,n)):a&&(ge(),Z(a,1,1,()=>{a=null}),ve())},i(i){l||(X(a),l=!0)},o(i){Z(a),l=!1},d(i){i&&(y(t),y(n)),a&&a.d(i)}}}function pt(s){let e,t,n,l=[],a=new Map,i,d,r=[],p=new Map,_,m=se(Object.entries(s[3]));const f=h=>h[11];for(let h=0;h<m.length;h+=1){let v=Se(s,m,h),P=f(v);a.set(P,l[h]=Pe(P,v))}let b=se(Object.entries(s[3]));const g=h=>h[11];for(let h=0;h<b.length;h+=1){let v=Ve(s,b,h),P=g(v);p.set(P,r[h]=Ue(P,v))}return{c(){e=u("div"),t=u("aside"),n=u("nav");for(let h=0;h<l.length;h+=1)l[h].c();i=z(),d=u("div");for(let h=0;h<r.length;h+=1)r[h].c();c(n,"class","sidebar-content"),c(t,"class","docs-sidebar"),c(d,"class","docs-content"),c(e,"class","docs-content-wrapper")},m(h,v){k(h,e,v),o(e,t),o(t,n);for(let P=0;P<l.length;P+=1)l[P]&&l[P].m(n,null);o(e,i),o(e,d);for(let P=0;P<r.length;P+=1)r[P]&&r[P].m(d,null);_=!0},p(h,v){v&28&&(m=se(Object.entries(h[3])),l=be(l,v,f,1,h,m,a,n,We,Pe,null,Se)),v&12&&(b=se(Object.entries(h[3])),ge(),r=be(r,v,g,1,h,b,p,d,Ge,Ue,null,Ve),ve())},i(h){if(!_){for(let v=0;v<b.length;v+=1)X(r[v]);_=!0}},o(h){for(let v=0;v<r.length;v+=1)Z(r[v]);_=!1},d(h){h&&y(e);for(let v=0;v<l.length;v+=1)l[v].d();for(let v=0;v<r.length;v+=1)r[v].d()}}}function mt(s){let e,t,n;return{c(){e=u("button"),e.innerHTML='<span class="txt">Close</span>',c(e,"type","button"),c(e,"class","btn btn-transparent")},m(l,a){k(l,e,a),t||(n=H(e,"click",s[6]),t=!0)},p:q,d(l){l&&y(e),t=!1,n()}}}function _t(s){let e,t,n={class:"docs-panel",$$slots:{footer:[mt],default:[pt]},$$scope:{ctx:s}};return e=new he({props:n}),s[8](e),e.$on("hide",s[9]),e.$on("show",s[10]),{c(){te(e.$$.fragment)},m(l,a){ee(e,l,a),t=!0},p(l,[a]){const i={};a&524292&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){Z(e.$$.fragment,l),t=!1},d(l){s[8](null),x(e,l)}}}function bt(s,e,t){const n={upsert:{label:"Upsert",component:me(()=>import("./UpsertApiDocs--ks4MpKl.js"),__vite__mapDeps([0,1,2]),import.meta.url)},search:{label:"Search",component:me(()=>import("./SearchApiDocs-bPNlciTI.js"),__vite__mapDeps([3,1,2]),import.meta.url)},view:{label:"View",component:me(()=>import("./ViewApiDocs-Bo3U9UfP.js"),__vite__mapDeps([4,1,2]),import.meta.url)},delete:{label:"Delete",component:me(()=>import("./DeleteApiDocs-dlcwSgjR.js"),__vite__mapDeps([5,1,2]),import.meta.url)}};let l,a="upsert";function i(){l==null||l.show()}function d(){l==null||l.hide()}function r(g){t(2,a=g)}const p=()=>d(),_=g=>r(g);function m(g){ne[g?"unshift":"push"](()=>{l=g,t(1,l)})}function f(g){re.call(this,s,g)}function b(g){re.call(this,s,g)}return[d,l,a,n,r,i,p,_,m,f,b]}class ht extends ce{constructor(e){super(),de(this,e,bt,_t,fe,{show:5,hide:0})}get show(){return this.$$.ctx[5]}get hide(){return this.$$.ctx[0]}}function gt(s){let e,t,n=s[5].type==="image"?"Image":"File",l,a,i,d,r;function p(h,v){return h[0]&&!h[2]?wt:h[2]?yt:kt}let _=p(s),m=_(s);function f(h,v){return h[0]?Ft:It}let b=f(s),g=b(s);return{c(){e=u("div"),t=u("label"),l=L(n),a=L(" *"),i=z(),m.c(),d=z(),r=u("small"),g.c(),c(t,"class","form-label svelte-hcpdm8"),c(r,"class","form-hint svelte-hcpdm8"),c(e,"class","form-field svelte-hcpdm8")},m(h,v){k(h,e,v),o(e,t),o(t,l),o(t,a),o(e,i),m.m(e,null),o(e,d),o(e,r),g.m(r,null)},p(h,v){v&32&&n!==(n=h[5].type==="image"?"Image":"File")&&K(l,n),_===(_=p(h))&&m?m.p(h,v):(m.d(1),m=_(h),m&&(m.c(),m.m(e,d))),b===(b=f(h))&&g?g.p(h,v):(g.d(1),g=b(h),g&&(g.c(),g.m(r,null)))},d(h){h&&y(e),m.d(),g.d()}}}function vt(s){let e,t,n,l,a,i,d,r;return{c(){e=u("div"),t=u("label"),t.textContent="Text Content *",n=z(),l=u("textarea"),a=z(),i=u("small"),i.textContent="Text content that will be used to generate the vector embedding",c(t,"for","vector-text"),c(t,"class","form-label svelte-hcpdm8"),c(l,"id","vector-text"),c(l,"placeholder","Enter text to generate embedding..."),c(l,"class","form-input svelte-hcpdm8"),c(l,"rows","4"),l.required=!0,c(i,"class","form-hint svelte-hcpdm8"),c(e,"class","form-field svelte-hcpdm8")},m(p,_){k(p,e,_),o(e,t),o(e,n),o(e,l),$(l,s[5].textContent),o(e,a),o(e,i),d||(r=H(l,"input",s[18]),d=!0)},p(p,_){_&32&&$(l,p[5].textContent)},d(p){p&&y(e),d=!1,r()}}}function yt(s){let e,t,n,l,a;function i(p,_){return p[5].type==="image"?Vt:zt}let d=i(s),r=d(s);return{c(){e=u("div"),r.c(),t=z(),n=u("button"),n.innerHTML='<i class="ri-close-line"></i>',c(n,"type","button"),c(n,"class","btn-remove svelte-hcpdm8"),c(e,"class","file-preview svelte-hcpdm8")},m(p,_){k(p,e,_),r.m(e,null),o(e,t),o(e,n),l||(a=H(n,"click",s[10]),l=!0)},p(p,_){d===(d=i(p))&&r?r.p(p,_):(r.d(1),r=d(p),r&&(r.c(),r.m(e,t)))},d(p){p&&y(e),r.d(),l=!1,a()}}}function kt(s){let e,t,n,l,a,i,d,r,p=s[5].type==="image"?"image":s[5].type==="video"?"video":"file",_,m,f;function b(v,P){return v[5].type==="image"?Ct:v[5].type==="video"?Pt:St}let g=b(s),h=g(s);return{c(){e=u("div"),t=u("input"),l=z(),a=u("label"),h.c(),i=z(),d=u("span"),r=L("Choose "),_=L(p),c(t,"type","file"),c(t,"accept",n=s[5].type==="image"?"image/*":s[5].type==="video"?"video/*":"*"),ke(t,"display","none"),c(t,"id","vector-file"),c(a,"for","vector-file"),c(a,"class","file-upload-label svelte-hcpdm8"),c(e,"class","file-upload-area svelte-hcpdm8")},m(v,P){k(v,e,P),o(e,t),s[20](t),o(e,l),o(e,a),h.m(a,null),o(a,i),o(a,d),o(d,r),o(d,_),m||(f=H(t,"change",s[9]),m=!0)},p(v,P){P&32&&n!==(n=v[5].type==="image"?"image/*":v[5].type==="video"?"video/*":"*")&&c(t,"accept",n),g!==(g=b(v))&&(h.d(1),h=g(v),h&&(h.c(),h.m(a,i))),P&32&&p!==(p=v[5].type==="image"?"image":v[5].type==="video"?"video":"file")&&K(_,p)},d(v){v&&y(e),s[20](null),h.d(),m=!1,f()}}}function wt(s){let e,t,n,l,a=s[5].type==="image"?"Image":s[5].type==="video"?"Video":"File",i,d,r;function p(f,b){var g;return f[5].type==="image"&&((g=f[0].metadata)!=null&&g.previewUrl)?Mt:f[5].type==="image"?Lt:f[5].type==="video"?Tt:Ut}let _=p(s),m=_(s);return{c(){e=u("div"),m.c(),t=z(),n=u("button"),l=L("Replace "),i=L(a),c(n,"type","button"),c(n,"class","btn-secondary svelte-hcpdm8"),c(e,"class","existing-content svelte-hcpdm8")},m(f,b){k(f,e,b),m.m(e,null),o(e,t),o(e,n),o(n,l),o(n,i),d||(r=H(n,"click",s[19]),d=!0)},p(f,b){_===(_=p(f))&&m?m.p(f,b):(m.d(1),m=_(f),m&&(m.c(),m.m(e,t))),b&32&&a!==(a=f[5].type==="image"?"Image":f[5].type==="video"?"Video":"File")&&K(i,a)},d(f){f&&y(e),m.d(),d=!1,r()}}}function zt(s){let e,t,n,l,a=s[2].name+"",i,d,r,p,_=Le(s[2].size)+"",m,f;return{c(){e=u("div"),t=u("i"),n=z(),l=u("span"),i=L(a),d=z(),r=u("span"),p=L("("),m=L(_),f=L(")"),c(t,"class","ri-file-line svelte-hcpdm8"),c(r,"class","file-size svelte-hcpdm8"),c(e,"class","file-info svelte-hcpdm8")},m(b,g){k(b,e,g),o(e,t),o(e,n),o(e,l),o(l,i),o(e,d),o(e,r),o(r,p),o(r,m),o(r,f)},p(b,g){g&4&&a!==(a=b[2].name+"")&&K(i,a),g&4&&_!==(_=Le(b[2].size)+"")&&K(m,_)},d(b){b&&y(e)}}}function Vt(s){let e,t;return{c(){e=u("img"),ae(e.src,t=s[6])||c(e,"src",t),c(e,"alt","Selected image"),c(e,"class","image-preview svelte-hcpdm8")},m(n,l){k(n,e,l)},p(n,l){l&64&&!ae(e.src,t=n[6])&&c(e,"src",t)},d(n){n&&y(e)}}}function St(s){let e;return{c(){e=u("i"),c(e,"class","ri-file-add-line svelte-hcpdm8")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function Pt(s){let e;return{c(){e=u("i"),c(e,"class","ri-video-line svelte-hcpdm8")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function Ct(s){let e;return{c(){e=u("i"),c(e,"class","ri-image-add-line svelte-hcpdm8")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function Ut(s){let e;return{c(){e=u("div"),e.innerHTML='<i class="ri-file-line svelte-hcpdm8"></i> <span>File content already embedded</span> <small class="svelte-hcpdm8">This vector already has file content. Upload a new file to replace it.</small>',c(e,"class","existing-file svelte-hcpdm8")},m(t,n){k(t,e,n)},p:q,d(t){t&&y(e)}}}function Tt(s){let e;return{c(){e=u("div"),e.innerHTML='<i class="ri-video-line svelte-hcpdm8"></i> <span>Video content already embedded</span> <small class="svelte-hcpdm8">This vector already has video content. Upload a new video to replace it.</small>',c(e,"class","existing-video svelte-hcpdm8")},m(t,n){k(t,e,n)},p:q,d(t){t&&y(e)}}}function Lt(s){let e;return{c(){e=u("div"),e.innerHTML='<i class="ri-image-line svelte-hcpdm8"></i> <span>Image content already embedded</span> <small class="svelte-hcpdm8">This vector already has image content. Upload a new image to replace it.</small>',c(e,"class","existing-image svelte-hcpdm8")},m(t,n){k(t,e,n)},p:q,d(t){t&&y(e)}}}function Mt(s){let e,t,n,l,a;return{c(){e=u("div"),t=u("img"),l=z(),a=u("small"),a.textContent="This vector already has image content. Upload a new image to replace it.",ae(t.src,n=s[0].metadata.previewUrl)||c(t,"src",n),c(t,"alt","Current image"),c(t,"class","existing-image-preview svelte-hcpdm8"),c(a,"class","svelte-hcpdm8"),c(e,"class","existing-image-with-preview svelte-hcpdm8")},m(i,d){k(i,e,d),o(e,t),o(e,l),o(e,a)},p(i,d){d&1&&!ae(t.src,n=i[0].metadata.previewUrl)&&c(t,"src",n)},d(i){i&&y(e)}}}function It(s){let e,t=s[5].type==="image"?"an image":s[5].type==="video"?"a video":"a file",n,l;return{c(){e=L("Upload "),n=L(t),l=L(" to generate embedding")},m(a,i){k(a,e,i),k(a,n,i),k(a,l,i)},p(a,i){i&32&&t!==(t=a[5].type==="image"?"an image":a[5].type==="video"?"a video":"a file")&&K(n,t)},d(a){a&&(y(e),y(n),y(l))}}}function Ft(s){let e,t=s[5].type==="image"?"image":s[5].type==="video"?"video":"file",n,l;return{c(){e=L("Upload a new "),n=L(t),l=L(" to replace the existing content")},m(a,i){k(a,e,i),k(a,n,i),k(a,l,i)},p(a,i){i&32&&t!==(t=a[5].type==="image"?"image":a[5].type==="video"?"video":"file")&&K(n,t)},d(a){a&&(y(e),y(n),y(l))}}}function Et(s){let e,t,n,l,a,i,d,r,p,_,m,f,b,g,h,v,P,U,O,j,A,J,E,S,N,w,T,I,D,V,C,M,W,R,G;function le(F,Q){return F[5].type==="text"?vt:gt}let Y=le(s),B=Y(s);return{c(){e=u("div"),t=u("form"),n=u("div"),l=u("label"),l.textContent="ID",a=z(),i=u("input"),r=z(),p=u("small"),p.textContent="Unique identifier for the vector (optional - auto-generated if empty)",_=z(),m=u("div"),f=u("label"),f.textContent="Type *",b=z(),g=u("select"),h=u("option"),h.textContent="Text",v=u("option"),v.textContent="Image",P=u("option"),P.textContent="Video",U=u("option"),U.textContent="File",O=z(),B.c(),j=z(),A=u("div"),J=u("label"),J.textContent="Embedding",E=z(),S=u("textarea"),N=z(),w=u("small"),w.textContent="JSON array of numbers representing the vector embedding (optional - will be auto-generated if empty)",T=z(),I=u("div"),D=u("label"),D.textContent="Metadata",V=z(),C=u("textarea"),M=z(),W=u("small"),W.textContent="Optional JSON metadata associated with the vector",c(l,"for","vector-id"),c(l,"class","form-label svelte-hcpdm8"),c(i,"id","vector-id"),c(i,"type","text"),c(i,"placeholder","unique-vector-id (optional - auto-generated)"),c(i,"class","form-input svelte-hcpdm8"),i.disabled=d=!!s[0],c(p,"class","form-hint svelte-hcpdm8"),c(n,"class","form-field svelte-hcpdm8"),c(f,"for","vector-type"),c(f,"class","form-label svelte-hcpdm8"),h.__value="text",$(h,h.__value),v.__value="image",$(v,v.__value),P.__value="video",$(P,P.__value),U.__value="file",$(U,U.__value),c(g,"id","vector-type"),c(g,"class","form-input svelte-hcpdm8"),g.required=!0,s[5].type===void 0&&Qe(()=>s[17].call(g)),c(m,"class","form-field svelte-hcpdm8"),c(J,"for","vector-embedding"),c(J,"class","form-label svelte-hcpdm8"),c(S,"id","vector-embedding"),c(S,"placeholder","[0.1, 0.2, 0.3, ...] (leave empty for auto-generation)"),c(S,"class","form-input svelte-hcpdm8"),c(S,"rows","4"),c(w,"class","form-hint svelte-hcpdm8"),c(A,"class","form-field svelte-hcpdm8"),c(D,"for","vector-metadata"),c(D,"class","form-label svelte-hcpdm8"),c(C,"id","vector-metadata"),c(C,"placeholder","Optional metadata as JSON"),c(C,"class","form-input svelte-hcpdm8"),c(C,"rows","3"),c(W,"class","form-hint svelte-hcpdm8"),c(I,"class","form-field svelte-hcpdm8"),c(e,"class","content")},m(F,Q){k(F,e,Q),o(e,t),o(t,n),o(n,l),o(n,a),o(n,i),$(i,s[5].id),o(n,r),o(n,p),o(t,_),o(t,m),o(m,f),o(m,b),o(m,g),o(g,h),o(g,v),o(g,P),o(g,U),we(g,s[5].type,!0),o(t,O),B.m(t,null),o(t,j),o(t,A),o(A,J),o(A,E),o(A,S),$(S,s[5].embedding),o(A,N),o(A,w),o(t,T),o(t,I),o(I,D),o(I,V),o(I,C),$(C,s[5].metadata),o(I,M),o(I,W),R||(G=[H(i,"input",s[16]),H(g,"change",s[17]),H(S,"input",s[21]),H(C,"input",s[22]),H(t,"submit",Ke(s[11]))],R=!0)},p(F,Q){Q&1&&d!==(d=!!F[0])&&(i.disabled=d),Q&32&&i.value!==F[5].id&&$(i,F[5].id),Q&32&&we(g,F[5].type),Y===(Y=le(F))&&B?B.p(F,Q):(B.d(1),B=Y(F),B&&(B.c(),B.m(t,j))),Q&32&&$(S,F[5].embedding),Q&32&&$(C,F[5].metadata)},d(F){F&&y(e),B.d(),R=!1,pe(G)}}}function Ot(s){let e;return{c(){e=L("New Vector")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function Nt(s){let e;return{c(){e=L("Edit Vector")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function Dt(s){let e;function t(a,i){return a[0]?Nt:Ot}let n=t(s),l=n(s);return{c(){e=u("h4"),l.c(),c(e,"class","txt txt-lg")},m(a,i){k(a,e,i),l.m(e,null)},p(a,i){n!==(n=t(a))&&(l.d(1),l=n(a),l&&(l.c(),l.m(e,null)))},d(a){a&&y(e),l.d()}}}function Te(s){let e,t,n;return{c(){e=u("button"),e.innerHTML='<i class="ri-search-line"></i> <span class="txt">Search Similar</span>',c(e,"type","button"),c(e,"class","btn btn-transparent")},m(l,a){k(l,e,a),t||(n=H(e,"click",s[8]),t=!0)},p:q,d(l){l&&y(e),t=!1,n()}}}function At(s){let e,t,n;return{c(){e=u("i"),t=z(),n=u("span"),n.textContent="Save Vector",c(e,"class","ri-save-line"),c(n,"class","txt")},m(l,a){k(l,e,a),k(l,t,a),k(l,n,a)},d(l){l&&(y(e),y(t),y(n))}}}function Rt(s){let e,t,n;return{c(){e=u("span"),t=z(),n=u("span"),n.textContent="Saving...",c(e,"class","loader loader-sm svelte-hcpdm8"),c(n,"class","txt")},m(l,a){k(l,e,a),k(l,t,a),k(l,n,a)},d(l){l&&(y(e),y(t),y(n))}}}function Ht(s){let e,t,n,l,a,i,d,r=s[0]&&Te(s);function p(f,b){return f[4]?Rt:At}let _=p(s),m=_(s);return{c(){r&&r.c(),e=z(),t=u("button"),n=L("Cancel"),l=z(),a=u("button"),m.c(),c(t,"type","button"),c(t,"class","btn btn-transparent"),t.disabled=s[4],c(a,"type","button"),c(a,"class","btn btn-primary"),a.disabled=s[4]},m(f,b){r&&r.m(f,b),k(f,e,b),k(f,t,b),o(t,n),k(f,l,b),k(f,a,b),m.m(a,null),i||(d=[H(t,"click",s[15]),H(a,"click",s[11])],i=!0)},p(f,b){f[0]?r?r.p(f,b):(r=Te(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),b&16&&(t.disabled=f[4]),_!==(_=p(f))&&(m.d(1),m=_(f),m&&(m.c(),m.m(a,null))),b&16&&(a.disabled=f[4])},d(f){f&&(y(e),y(t),y(l),y(a)),r&&r.d(f),m.d(),i=!1,pe(d)}}}function Jt(s){let e,t,n={class:"overlay-panel-lg",$$slots:{footer:[Ht],header:[Dt],default:[Et]},$$scope:{ctx:s}};return e=new he({props:n}),s[23](e),e.$on("hide",s[24]),e.$on("show",s[25]),{c(){te(e.$$.fragment)},m(l,a){ee(e,l,a),t=!0},p(l,[a]){const i={};a&268435575&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){Z(e.$$.fragment,l),t=!1},d(l){s[23](null),x(e,l)}}}function Le(s){if(!s)return"";const e=["B","KB","MB","GB"],t=Math.floor(Math.log(s)/Math.log(1024));return Math.round(s/Math.pow(1024,t)*100)/100+" "+e[t]}function qt(s,e,t){let{isVisible:n=!1}=e,{vector:l=null}=e;const a=ye();let i,d=!1,r={id:"",type:"text",embedding:"",metadata:"{}",textContent:""},p,_=null,m=null,f=!1;function b(V=null){t(0,l=V),i==null||i.show()}function g(){t(0,l=null),i==null||i.hide()}function h(){if(console.log("[VectorUpsertPanel] searchSimilar called with vector:",l),l)if(console.log("[VectorUpsertPanel] Vector exists:",l.id,l.type),l.embedding){console.log("[VectorUpsertPanel] Vector has embedding:",l.embedding);let V=l.embedding;if(typeof l.embedding=="string")try{V=JSON.parse(l.embedding),console.log("[VectorUpsertPanel] Parsed embedding string to array")}catch(C){console.error("Failed to parse embedding string:",C),alert("This vector's embedding data is corrupted and cannot be used for similarity search.");return}if(Array.isArray(V)&&V.length>0){console.log("[VectorUpsertPanel] Embedding array valid, calling callback");const C={embedding:V,type:l.type};g(),a("searchSimilar",C)}else alert("This vector has no embedding data and cannot be used for similarity search.")}else console.log("[VectorUpsertPanel] Vector has no embedding"),alert("This vector has no embedding data and cannot be used for similarity search.");else console.log("[VectorUpsertPanel] No vector available"),alert("No vector data available for similarity search.")}function v(V){const C=V.target.files[0];if(C&&(t(2,_=C),r.type==="image")){const M=new FileReader;M.onload=W=>{t(6,m=W.target.result)},M.readAsDataURL(C)}}function P(){t(2,_=null),t(6,m=null),p&&t(1,p.value="",p)}async function U(){if(console.log("[VectorUpsertPanel] Starting handleSubmit"),d){console.log("[VectorUpsertPanel] Already loading, returning");return}try{console.log("[VectorUpsertPanel] Form data:",r);let V;if(r.embedding.trim()){console.log("[VectorUpsertPanel] Parsing custom embedding");try{if(V=JSON.parse(r.embedding),!Array.isArray(V))throw new Error("Embedding must be an array");console.log("[VectorUpsertPanel] Custom embedding parsed:",V.length,"dimensions")}catch(G){console.error("[VectorUpsertPanel] Invalid embedding format:",G),alert("Invalid embedding format. Must be a JSON array of numbers.");return}}else console.log("[VectorUpsertPanel] Using null embedding for auto-generation"),V=null;let C={};try{console.log("[VectorUpsertPanel] Parsing metadata"),C=JSON.parse(r.metadata),console.log("[VectorUpsertPanel] Metadata parsed:",C)}catch(G){console.error("[VectorUpsertPanel] Invalid metadata format:",G),alert("Invalid metadata format. Must be valid JSON.");return}r.type==="text"&&r.textContent.trim()&&(C.content=r.textContent.trim(),console.log("[VectorUpsertPanel] Added text content to metadata:",C.content)),console.log("[VectorUpsertPanel] Setting isLoading to true"),t(4,d=!0);const M={type:r.type,embedding:V||null,metadata:C};r.id.trim()?(M.id=r.id,console.log("[VectorUpsertPanel] Including custom ID:",M.id)):console.log("[VectorUpsertPanel] No custom ID, will auto-generate"),console.log("[VectorUpsertPanel] Final vectorData:",M);const W={vectors:[M]};if(r.type==="image"&&_){const G=new FileReader,le=new Promise((Y,B)=>{G.onload=()=>Y(G.result.split(",")[1]),G.onerror=B,G.readAsDataURL(_)});try{const Y=await le;W.imageData=Y,console.log("[VectorUpsertPanel] Added image data to request")}catch(Y){console.error("[VectorUpsertPanel] Failed to convert image to base64:",Y)}}console.log("[VectorUpsertPanel] Making API call to /api/vectors/upsert");const R=await _e.send("/api/vectors/upsert",{method:"POST",body:W});console.log("[VectorUpsertPanel] API call successful, response:",R),console.log("[VectorUpsertPanel] Dispatching save event"),a("save",{isNew:!l}),console.log("[VectorUpsertPanel] Calling hide()"),g()}catch(V){console.error("[VectorUpsertPanel] Failed to save vector:",V),console.error("[VectorUpsertPanel] Error details:",{message:V.message,stack:V.stack,response:V.response,status:V.status}),alert(`Failed to save vector: ${V.message||"Unknown error"}`)}finally{console.log("[VectorUpsertPanel] Setting isLoading to false"),t(4,d=!1)}}const O=()=>g();function j(){r.id=this.value,t(5,r),t(0,l),t(14,f),t(1,p),t(2,_)}function A(){r.type=Xe(this),t(5,r),t(0,l),t(14,f),t(1,p),t(2,_)}function J(){r.textContent=this.value,t(5,r),t(0,l),t(14,f),t(1,p),t(2,_)}const E=()=>{p&&p.click()};function S(V){ne[V?"unshift":"push"](()=>{p=V,t(1,p),t(0,l),t(14,f),t(2,_)})}function N(){r.embedding=this.value,t(5,r),t(0,l),t(14,f),t(1,p),t(2,_)}function w(){r.metadata=this.value,t(5,r),t(0,l),t(14,f),t(1,p),t(2,_)}function T(V){ne[V?"unshift":"push"](()=>{i=V,t(3,i)})}function I(V){re.call(this,s,V)}function D(V){re.call(this,s,V)}return s.$$set=V=>{"isVisible"in V&&t(12,n=V.isVisible),"vector"in V&&t(0,l=V.vector)},s.$$.update=()=>{s.$$.dirty&16391&&(l&&!f?(t(5,r.id=l.id||"",r),t(5,r.type=l.type||"text",r),t(5,r.embedding=l.embedding&&Array.isArray(l.embedding)?JSON.stringify(l.embedding):"",r),t(5,r.metadata=l.metadata?JSON.stringify(l.metadata):"{}",r),t(5,r.textContent=l.metadata&&l.metadata.content?l.metadata.content:"",r),t(14,f=!0),p&&!_&&t(1,p.value="",p)):!l&&f&&(t(5,r={id:"",type:"text",embedding:"",metadata:"{}",textContent:""}),t(2,_=null),t(6,m=null),p&&t(1,p.value="",p),t(14,f=!1)))},[l,p,_,i,d,r,m,g,h,v,P,U,n,b,f,O,j,A,J,E,S,N,w,T,I,D]}class jt extends ce{constructor(e){super(),de(this,e,qt,Jt,fe,{isVisible:12,vector:0,show:13})}get show(){return this.$$.ctx[13]}}function Me(s,e,t){const n=s.slice();return n[22]=e[t],n}function Bt(s){let e,t,n={class:"table-wrapper",$$slots:{default:[Qt]},$$scope:{ctx:s}};return e=new $e({props:n}),s[17](e),{c(){te(e.$$.fragment)},m(l,a){ee(e,l,a),t=!0},p(l,a){const i={};a&33554492&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){Z(e.$$.fragment,l),t=!1},d(l){s[17](null),x(e,l)}}}function Wt(s){let e,t,n,l,a,i,d,r,p,_;return{c(){e=u("div"),t=u("div"),t.innerHTML='<i class="ri-search-line"></i>',n=z(),l=u("h3"),l.textContent="No vectors found",a=z(),i=u("p"),i.textContent="Create your first vector to get started.",d=z(),r=u("button"),r.innerHTML='<i class="ri-add-line"></i> <span class="txt">Create vector</span>',c(t,"class","icon icon-lg txt-hint m-b-base svelte-32arzo"),c(l,"class","txt-hint svelte-32arzo"),c(i,"class","txt-hint svelte-32arzo"),c(r,"type","button"),c(r,"class","btn btn-primary m-t-base"),c(e,"class","text-center p-lg")},m(m,f){k(m,e,f),o(e,t),o(e,n),o(e,l),o(e,a),o(e,i),o(e,d),o(e,r),p||(_=H(r,"click",s[13]),p=!0)},p:q,i:q,o:q,d(m){m&&y(e),p=!1,_()}}}function Kt(s){let e;return{c(){e=u("div"),e.innerHTML='<span class="loader"></span> <div class="txt-hint m-t-sm svelte-32arzo">Loading vectors...</div>',c(e,"class","text-center p-lg")},m(t,n){k(t,e,n)},p:q,i:q,o:q,d(t){t&&y(e)}}}function Gt(s){let e,t=(s[22].metadata.content.length>30?s[22].metadata.content.substring(0,30)+"...":s[22].metadata.content)+"",n;return{c(){e=u("div"),n=L(t),c(e,"class","text-snippet svelte-32arzo")},m(l,a){k(l,e,a),o(e,n)},p(l,a){a&4&&t!==(t=(l[22].metadata.content.length>30?l[22].metadata.content.substring(0,30)+"...":l[22].metadata.content)+"")&&K(n,t)},d(l){l&&y(e)}}}function Yt(s){let e,t,n;return{c(){e=u("div"),t=u("img"),ae(t.src,n=s[22].metadata.previewUrl)||c(t,"src",n),c(t,"alt","Preview"),c(t,"class","mini-image svelte-32arzo"),c(e,"class","mini-preview svelte-32arzo")},m(l,a){k(l,e,a),o(e,t)},p(l,a){a&4&&!ae(t.src,n=l[22].metadata.previewUrl)&&c(t,"src",n)},d(l){l&&y(e)}}}function Ie(s,e){let t,n,l,a=e[22].id+"",i,d,r,p,_,m=e[22].type+"",f,b,g,h,v,P=Oe(e[22].embedding)+"",U,O,j,A=new Date(e[22].created||e[22].created_at).toLocaleString()+"",J,E,S,N,w,T,I;function D(){return e[14](e[22])}function V(R,G){var le,Y;if(R[22].type==="image"&&((le=R[22].metadata)!=null&&le.previewUrl))return Yt;if(R[22].type==="text"&&((Y=R[22].metadata)!=null&&Y.content))return Gt}let C=V(e),M=C&&C(e);function W(){return e[15](e[22])}return{key:s,first:null,c(){t=u("tr"),n=u("td"),l=u("button"),i=L(a),d=z(),r=u("td"),p=u("div"),_=u("span"),f=L(m),b=z(),M&&M.c(),g=z(),h=u("td"),v=u("code"),U=L(P),O=z(),j=u("td"),J=L(A),E=z(),S=u("td"),N=u("button"),N.innerHTML='<i class="ri-edit-line"></i>',w=z(),c(l,"class","link-hint svelte-32arzo"),c(n,"class","table-cell svelte-32arzo"),c(_,"class","badge badge-sm svelte-32arzo"),c(p,"class","type-cell svelte-32arzo"),c(r,"class","table-cell svelte-32arzo"),c(v,"class","txt-sm svelte-32arzo"),c(h,"class","table-cell svelte-32arzo"),c(j,"class","table-cell txt-hint svelte-32arzo"),c(N,"type","button"),c(N,"class","btn btn-transparent btn-sm"),c(S,"class","table-cell min-width svelte-32arzo"),c(t,"class","table-row svelte-32arzo"),this.first=t},m(R,G){k(R,t,G),o(t,n),o(n,l),o(l,i),o(t,d),o(t,r),o(r,p),o(p,_),o(_,f),o(p,b),M&&M.m(p,null),o(t,g),o(t,h),o(h,v),o(v,U),o(t,O),o(t,j),o(j,J),o(t,E),o(t,S),o(S,N),o(t,w),T||(I=[H(l,"click",D),xe(et.call(null,N,{text:"Edit"})),H(N,"click",W)],T=!0)},p(R,G){e=R,G&4&&a!==(a=e[22].id+"")&&K(i,a),G&4&&m!==(m=e[22].type+"")&&K(f,m),C===(C=V(e))&&M?M.p(e,G):(M&&M.d(1),M=C&&C(e),M&&(M.c(),M.m(p,null))),G&4&&P!==(P=Oe(e[22].embedding)+"")&&K(U,P),G&4&&A!==(A=new Date(e[22].created||e[22].created_at).toLocaleString()+"")&&K(J,A)},d(R){R&&y(t),M&&M.d(),T=!1,pe(I)}}}function Fe(s){let e,t,n,l,a;return{c(){e=u("div"),t=u("button"),n=u("span"),n.textContent="Load more",c(n,"class","txt"),c(t,"class","btn btn-expanded-lg btn-secondary btn-horizontal-sticky"),t.disabled=s[4],oe(t,"btn-loading",s[4]),c(e,"class","load-more-container")},m(i,d){k(i,e,d),o(e,t),o(t,n),l||(a=H(t,"click",Ke(s[16])),l=!0)},p(i,d){d&16&&(t.disabled=i[4]),d&16&&oe(t,"btn-loading",i[4])},d(i){i&&y(e),l=!1,a()}}}function Qt(s){let e,t,n,l,a=[],i=new Map,d,r,p=se(s[2]);const _=f=>f[4]?f[22]:f[22].id;for(let f=0;f<p.length;f+=1){let b=Me(s,p,f),g=_(b);i.set(g,a[f]=Ie(g,b))}let m=s[2].length&&s[5]&&Fe(s);return{c(){e=u("table"),t=u("thead"),t.innerHTML='<tr><th class="table-header svelte-32arzo">ID</th> <th class="table-header svelte-32arzo">Type</th> <th class="table-header svelte-32arzo">Embedding Preview</th> <th class="table-header svelte-32arzo">Created</th> <th class="table-header min-width svelte-32arzo">Actions</th></tr>',n=z(),l=u("tbody");for(let f=0;f<a.length;f+=1)a[f].c();d=z(),m&&m.c(),r=ue(),c(e,"class","table svelte-32arzo"),oe(e,"table-loading",s[4])},m(f,b){k(f,e,b),o(e,t),o(e,n),o(e,l);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(l,null);k(f,d,b),m&&m.m(f,b),k(f,r,b)},p(f,b){b&84&&(p=se(f[2]),a=be(a,b,_,1,f,p,i,l,We,Ie,null,Me)),b&16&&oe(e,"table-loading",f[4]),f[2].length&&f[5]?m?m.p(f,b):(m=Fe(f),m.c(),m.m(r.parentNode,r)):m&&(m.d(1),m=null)},d(f){f&&(y(e),y(d),y(r));for(let b=0;b<a.length;b+=1)a[b].d();m&&m.d(f)}}}function Xt(s){let e,t,n,l;const a=[Kt,Wt,Bt],i=[];function d(r,p){return r[4]?0:r[2].length===0?1:2}return e=d(s),t=i[e]=a[e](s),{c(){t.c(),n=ue()},m(r,p){i[e].m(r,p),k(r,n,p),l=!0},p(r,[p]){let _=e;e=d(r),e===_?i[e].p(r,p):(ge(),Z(i[_],1,1,()=>{i[_]=null}),ve(),t=i[e],t?t.p(r,p):(t=i[e]=a[e](r),t.c()),X(t,1),t.m(n.parentNode,n))},i(r){l||(X(t),l=!0)},o(r){Z(t),l=!1},d(r){r&&y(n),i[e].d(r)}}}const Ee=40;function Oe(s){return!Array.isArray(s)||s.length===0?"Empty":s.length<=5?`[${s.map(e=>e.toFixed(3)).join(", ")}]`:`[${s.slice(0,3).map(e=>e.toFixed(3)).join(", ")}, ..., ${s.length} total]`}function Zt(s,e,t){let n,{collection:l=null}=e,{filter:a=""}=e,{sort:i="-created"}=e;const d=ye();let r,p=[],_=1,m=0,f=0,b=!1,g=0;Ze(()=>{h()});async function h(S=1,N=!0){var w,T,I;console.log("[VectorsList] Loading vectors page",S),t(4,b=!0);try{const D=await _e.send("/api/vectors",{method:"GET",query:{page:S,perPage:Ee,sort:i,filter:a,skipTotal:S>1?1:0}});if(console.log("[VectorsList] API response for page",S,":",D),S<=1&&v(),t(3,_=D.page||S),t(12,m=((w=D.items)==null?void 0:w.length)||0),f=D.totalItems||f,N&&((T=D.items)!=null&&T.length)){const V=++g;for(;(I=D.items)!=null&&I.length&&g==V;){const C=D.items.splice(0,20);for(let M of C)ie.pushOrReplaceByKey(p,M);t(2,p),await ie.yieldToMain()}}else{for(let V of D.items||[])ie.pushOrReplaceByKey(p,V);t(2,p)}console.log("[VectorsList] Loaded page",S,"with",m,"vectors, total so far:",p.length),d("countUpdated",{count:f})}catch(D){if(D.isAbort){console.log("[VectorsList] Request was auto-cancelled, ignoring");return}console.error("[VectorsList] Failed to load vectors:",D),console.error("[VectorsList] Error details:",{message:D.message,status:D.status,response:D.response}),S<=1&&(t(2,p=[]),f=0)}finally{t(4,b=!1)}}function v(){r==null||r.resetVerticalScroll(),t(2,p=[]),t(3,_=1),t(12,m=0)}async function P(){const S=_;for(let N=1;N<=S;N++)(N===1||n)&&await h(N,!1)}function U(S){return p.some(N=>N.id===S)}const O=()=>d("new"),j=S=>d("select",S),A=S=>d("select",S),J=()=>h(_+1);function E(S){ne[S?"unshift":"push"](()=>{r=S,t(1,r)})}return s.$$set=S=>{"collection"in S&&t(7,l=S.collection),"filter"in S&&t(8,a=S.filter),"sort"in S&&t(9,i=S.sort)},s.$$.update=()=>{s.$$.dirty&4096&&t(5,n=m>=Ee)},[h,r,p,_,b,n,d,l,a,i,P,U,m,O,j,A,J,E]}class $t extends ce{constructor(e){super(),de(this,e,Zt,Xt,fe,{collection:7,filter:8,sort:9,load:0,reloadLoadedPages:10,hasRecord:11})}get load(){return this.$$.ctx[0]}get reloadLoadedPages(){return this.$$.ctx[10]}get hasRecord(){return this.$$.ctx[11]}}function xt(s){let e,t,n,l=s[0]!==1?"s":"",a,i;return{c(){e=u("span"),t=L(s[0]),n=L(" vector"),a=L(l),i=L(" total")},m(d,r){k(d,e,r),o(e,t),o(e,n),o(e,a),o(e,i)},p(d,[r]){r&1&&K(t,d[0]),r&1&&l!==(l=d[0]!==1?"s":"")&&K(a,l)},i:q,o:q,d(d){d&&y(e)}}}function el(s,e,t){let{totalCount:n=0}=e;function l(a){t(0,n=a)}return s.$$set=a=>{"totalCount"in a&&t(0,n=a.totalCount)},[n,l]}class tl extends ce{constructor(e){super(),de(this,e,el,xt,fe,{totalCount:0,updateCount:1})}get updateCount(){return this.$$.ctx[1]}}function Ne(s,e,t){const n=s.slice();return n[26]=e[t],n}function De(s){let e,t,n,l,a,i;return{c(){e=u("div"),t=u("label"),t.textContent="Search Text",n=z(),l=u("textarea"),c(t,"class","form-label svelte-1ywx8az"),c(l,"class","form-input svelte-1ywx8az"),c(l,"placeholder","Enter text to find similar content..."),c(l,"rows","3"),c(e,"class","form-field svelte-1ywx8az")},m(d,r){k(d,e,r),o(e,t),o(e,n),o(e,l),$(l,s[1]),a||(i=H(l,"input",s[18]),a=!0)},p(d,r){r&2&&$(l,d[1])},d(d){d&&y(e),a=!1,i()}}}function Ae(s){let e,t,n;function l(d,r){return d[3]?ll:nl}let a=l(s),i=a(s);return{c(){e=u("div"),t=u("label"),t.textContent="Upload Image",n=z(),i.c(),c(t,"class","form-label svelte-1ywx8az"),c(e,"class","form-field svelte-1ywx8az")},m(d,r){k(d,e,r),o(e,t),o(e,n),i.m(e,null)},p(d,r){a===(a=l(d))&&i?i.p(d,r):(i.d(1),i=a(d),i&&(i.c(),i.m(e,null)))},d(d){d&&y(e),i.d()}}}function ll(s){let e,t,n,l,a,i=s[3].name+"",d,r,p,_,m=ie.formattedFileSize(s[3].size)+"",f,b,g,h,v,P;return{c(){e=u("div"),t=u("div"),n=u("i"),l=z(),a=u("span"),d=L(i),r=z(),p=u("span"),_=L("("),f=L(m),b=L(")"),g=z(),h=u("button"),h.innerHTML='<i class="ri-close-line"></i>',c(n,"class","ri-image-line svelte-1ywx8az"),c(p,"class","file-size svelte-1ywx8az"),c(t,"class","file-info svelte-1ywx8az"),c(h,"type","button"),c(h,"class","btn-remove svelte-1ywx8az"),c(e,"class","file-preview svelte-1ywx8az")},m(U,O){k(U,e,O),o(e,t),o(t,n),o(t,l),o(t,a),o(a,d),o(t,r),o(t,p),o(p,_),o(p,f),o(p,b),o(e,g),o(e,h),v||(P=H(h,"click",s[11]),v=!0)},p(U,O){O&8&&i!==(i=U[3].name+"")&&K(d,i),O&8&&m!==(m=ie.formattedFileSize(U[3].size)+"")&&K(f,m)},d(U){U&&y(e),v=!1,P()}}}function nl(s){let e,t,n,l,a,i;return{c(){e=u("div"),t=u("input"),n=z(),l=u("label"),l.innerHTML='<i class="ri-image-add-line svelte-1ywx8az"></i> <span>Click to upload an image</span>',c(t,"type","file"),c(t,"accept","image/*"),ke(t,"display","none"),c(t,"id","image-upload"),c(l,"for","image-upload"),c(l,"class","file-upload-label svelte-1ywx8az"),c(e,"class","file-upload-area svelte-1ywx8az")},m(d,r){k(d,e,r),o(e,t),o(e,n),o(e,l),a||(i=H(t,"change",s[9]),a=!0)},p:q,d(d){d&&y(e),a=!1,i()}}}function Re(s){let e,t,n;function l(d,r){return d[4]?sl:al}let a=l(s),i=a(s);return{c(){e=u("div"),t=u("label"),t.textContent="Upload File",n=z(),i.c(),c(t,"class","form-label svelte-1ywx8az"),c(e,"class","form-field svelte-1ywx8az")},m(d,r){k(d,e,r),o(e,t),o(e,n),i.m(e,null)},p(d,r){a===(a=l(d))&&i?i.p(d,r):(i.d(1),i=a(d),i&&(i.c(),i.m(e,null)))},d(d){d&&y(e),i.d()}}}function sl(s){let e,t,n,l,a,i=s[4].name+"",d,r,p,_,m=ie.formattedFileSize(s[4].size)+"",f,b,g,h,v,P;return{c(){e=u("div"),t=u("div"),n=u("i"),l=z(),a=u("span"),d=L(i),r=z(),p=u("span"),_=L("("),f=L(m),b=L(")"),g=z(),h=u("button"),h.innerHTML='<i class="ri-close-line"></i>',c(n,"class","ri-file-line svelte-1ywx8az"),c(p,"class","file-size svelte-1ywx8az"),c(t,"class","file-info svelte-1ywx8az"),c(h,"type","button"),c(h,"class","btn-remove svelte-1ywx8az"),c(e,"class","file-preview svelte-1ywx8az")},m(U,O){k(U,e,O),o(e,t),o(t,n),o(t,l),o(t,a),o(a,d),o(t,r),o(t,p),o(p,_),o(p,f),o(p,b),o(e,g),o(e,h),v||(P=H(h,"click",s[12]),v=!0)},p(U,O){O&16&&i!==(i=U[4].name+"")&&K(d,i),O&16&&m!==(m=ie.formattedFileSize(U[4].size)+"")&&K(f,m)},d(U){U&&y(e),v=!1,P()}}}function al(s){let e,t,n,l,a,i;return{c(){e=u("div"),t=u("input"),n=z(),l=u("label"),l.innerHTML='<i class="ri-file-add-line svelte-1ywx8az"></i> <span>Click to upload a file</span>',c(t,"type","file"),ke(t,"display","none"),c(t,"id","file-upload"),c(l,"for","file-upload"),c(l,"class","file-upload-label svelte-1ywx8az"),c(e,"class","file-upload-area svelte-1ywx8az")},m(d,r){k(d,e,r),o(e,t),o(e,n),o(e,l),a||(i=H(t,"change",s[10]),a=!0)},p:q,d(d){d&&y(e),a=!1,i()}}}function He(s){let e,t,n,l,a;return{c(){e=u("div"),t=u("i"),n=z(),l=u("span"),a=L(s[7]),c(t,"class","ri-error-warning-line"),c(e,"class","error-message svelte-1ywx8az")},m(i,d){k(i,e,d),o(e,t),o(e,n),o(e,l),o(l,a)},p(i,d){d&128&&K(a,i[7])},d(i){i&&y(e)}}}function il(s){let e,t,n;return{c(){e=u("i"),t=z(),n=u("span"),n.textContent="Search",c(e,"class","ri-search-line")},m(l,a){k(l,e,a),k(l,t,a),k(l,n,a)},d(l){l&&(y(e),y(t),y(n))}}}function rl(s){let e,t,n;return{c(){e=u("i"),t=z(),n=u("span"),n.textContent="Searching...",c(e,"class","ri-loader-4-line loader-sm svelte-1ywx8az")},m(l,a){k(l,e,a),k(l,t,a),k(l,n,a)},d(l){l&&(y(e),y(t),y(n))}}}function Je(s){let e,t,n,l=s[6].length+"",a,i,d,r,p=se(s[6]),_=[];for(let m=0;m<p.length;m+=1)_[m]=Be(Ne(s,p,m));return{c(){e=u("div"),t=u("h4"),n=L("Search Results ("),a=L(l),i=L(")"),d=z(),r=u("div");for(let m=0;m<_.length;m+=1)_[m].c();c(t,"class","svelte-1ywx8az"),c(r,"class","results-list svelte-1ywx8az"),c(e,"class","search-results svelte-1ywx8az")},m(m,f){k(m,e,f),o(e,t),o(t,n),o(t,a),o(t,i),o(e,d),o(e,r);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(r,null)},p(m,f){if(f&64&&l!==(l=m[6].length+"")&&K(a,l),f&64){p=se(m[6]);let b;for(b=0;b<p.length;b+=1){const g=Ne(m,p,b);_[b]?_[b].p(g,f):(_[b]=Be(g),_[b].c(),_[b].m(r,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=p.length}},d(m){m&&y(e),tt(_,m)}}}function ol(s){let e;return{c(){e=u("div"),e.innerHTML='<i class="ri-file-line"></i> <span>File vector</span>',c(e,"class","file-preview svelte-1ywx8az")},m(t,n){k(t,e,n)},p:q,d(t){t&&y(e)}}}function cl(s){let e;return{c(){e=u("div"),e.innerHTML='<i class="ri-video-line"></i> <span>Video vector</span>',c(e,"class","video-preview")},m(t,n){k(t,e,n)},p:q,d(t){t&&y(e)}}}function dl(s){var d;let e,t,n,l,a,i=((d=s[26].metadata)==null?void 0:d.previewUrl)&&qe(s);return{c(){e=u("div"),t=u("i"),n=z(),l=u("span"),l.textContent="Image vector",a=z(),i&&i.c(),c(t,"class","ri-image-line"),c(e,"class","image-preview")},m(r,p){k(r,e,p),o(e,t),o(e,n),o(e,l),o(e,a),i&&i.m(e,null)},p(r,p){var _;(_=r[26].metadata)!=null&&_.previewUrl?i?i.p(r,p):(i=qe(r),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(r){r&&y(e),i&&i.d()}}}function fl(s){let e,t,n,l,a=(s[26].metadata.content.length>50?s[26].metadata.content.substring(0,50)+"...":s[26].metadata.content)+"",i;return{c(){e=u("div"),t=u("i"),n=z(),l=u("span"),i=L(a),c(t,"class","ri-text"),c(e,"class","text-preview")},m(d,r){k(d,e,r),o(e,t),o(e,n),o(e,l),o(l,i)},p(d,r){r&64&&a!==(a=(d[26].metadata.content.length>50?d[26].metadata.content.substring(0,50)+"...":d[26].metadata.content)+"")&&K(i,a)},d(d){d&&y(e)}}}function qe(s){let e,t;return{c(){e=u("img"),ae(e.src,t=s[26].metadata.previewUrl)||c(e,"src",t),c(e,"alt","Preview"),c(e,"class","result-mini-image")},m(n,l){k(n,e,l)},p(n,l){l&64&&!ae(e.src,t=n[26].metadata.previewUrl)&&c(e,"src",t)},d(n){n&&y(e)}}}function je(s){let e,t,n=s[26].ref_id+"",l;return{c(){e=u("span"),t=L("Ref: "),l=L(n),c(e,"class","result-ref svelte-1ywx8az")},m(a,i){k(a,e,i),o(e,t),o(e,l)},p(a,i){i&64&&n!==(n=a[26].ref_id+"")&&K(l,n)},d(a){a&&y(e)}}}function Be(s){var D;let e,t,n,l,a=s[26].type+"",i,d,r,p=(((D=s[26].score)==null?void 0:D.toFixed(3))||"N/A")+"",_,m,f,b,g,h,v,P=s[26].id+"",U,O,j,A,J=new Date(s[26].created||s[26].created_at).toLocaleString()+"",E,S;function N(V,C){var M;return V[26].type==="text"&&((M=V[26].metadata)!=null&&M.content)?fl:V[26].type==="image"?dl:V[26].type==="video"?cl:ol}let w=N(s),T=w(s),I=s[26].ref_id&&je(s);return{c(){e=u("div"),t=u("div"),n=u("span"),l=u("span"),i=L(a),d=z(),r=u("span"),_=L(p),m=z(),f=u("div"),T.c(),b=z(),g=u("div"),h=u("span"),v=L("ID: "),U=L(P),O=z(),I&&I.c(),j=z(),A=u("span"),E=L(J),S=z(),c(l,"class","badge badge-sm svelte-1ywx8az"),c(n,"class","result-type"),c(r,"class","badge score-badge svelte-1ywx8az"),c(t,"class","result-header svelte-1ywx8az"),c(f,"class","result-content"),c(h,"class","result-id svelte-1ywx8az"),c(A,"class","result-date"),c(g,"class","result-footer"),c(e,"class","result-item svelte-1ywx8az")},m(V,C){k(V,e,C),o(e,t),o(t,n),o(n,l),o(l,i),o(t,d),o(t,r),o(r,_),o(e,m),o(e,f),T.m(f,null),o(e,b),o(e,g),o(g,h),o(h,v),o(h,U),o(g,O),I&&I.m(g,null),o(g,j),o(g,A),o(A,E),o(e,S)},p(V,C){var M;C&64&&a!==(a=V[26].type+"")&&K(i,a),C&64&&p!==(p=(((M=V[26].score)==null?void 0:M.toFixed(3))||"N/A")+"")&&K(_,p),w===(w=N(V))&&T?T.p(V,C):(T.d(1),T=w(V),T&&(T.c(),T.m(f,null))),C&64&&P!==(P=V[26].id+"")&&K(U,P),V[26].ref_id?I?I.p(V,C):(I=je(V),I.c(),I.m(g,j)):I&&(I.d(1),I=null),C&64&&J!==(J=new Date(V[26].created||V[26].created_at).toLocaleString()+"")&&K(E,J)},d(V){V&&y(e),T.d(),I&&I.d()}}}function ul(s){let e,t,n,l,a,i,d,r,p,_,m,f,b,g,h,v,P,U,O,j,A,J,E,S,N,w,T,I,D,V,C=s[2]==="text"&&De(s),M=s[2]==="image"&&Ae(s),W=s[2]==="file"&&Re(s),R=s[7]&&He(s);function G(F,Q){return F[5]?rl:il}let le=G(s),Y=le(s),B=s[6].length>0&&Je(s);return{c(){e=u("div"),t=u("div"),n=u("label"),n.textContent="Search Type",l=z(),a=u("div"),i=u("button"),d=u("i"),r=L(`
                        Text`),_=z(),m=u("button"),f=u("i"),b=L(`
                        Image`),h=z(),v=u("button"),P=u("i"),U=L(`
                        File`),j=z(),C&&C.c(),A=z(),M&&M.c(),J=z(),W&&W.c(),E=z(),R&&R.c(),S=z(),N=u("div"),w=u("button"),Y.c(),I=z(),B&&B.c(),c(n,"class","form-label svelte-1ywx8az"),c(d,"class","ri-text"),c(i,"type","button"),c(i,"class",p="tab-btn "+(s[2]==="text"?"active":"")+" svelte-1ywx8az"),c(f,"class","ri-image-line"),c(m,"type","button"),c(m,"class",g="tab-btn "+(s[2]==="image"?"active":"")+" svelte-1ywx8az"),c(P,"class","ri-file-line"),c(v,"type","button"),c(v,"class",O="tab-btn "+(s[2]==="file"?"active":"")+" svelte-1ywx8az"),c(a,"class","search-type-tabs svelte-1ywx8az"),c(t,"class","form-field svelte-1ywx8az"),c(w,"type","button"),c(w,"class","btn btn-primary"),w.disabled=T=s[5]||!s[1].trim()&&!s[3]&&!s[4],c(N,"class","form-actions svelte-1ywx8az"),c(e,"class","content")},m(F,Q){k(F,e,Q),o(e,t),o(t,n),o(t,l),o(t,a),o(a,i),o(i,d),o(i,r),o(a,_),o(a,m),o(m,f),o(m,b),o(a,h),o(a,v),o(v,P),o(v,U),o(e,j),C&&C.m(e,null),o(e,A),M&&M.m(e,null),o(e,J),W&&W.m(e,null),o(e,E),R&&R.m(e,null),o(e,S),o(e,N),o(N,w),Y.m(w,null),o(e,I),B&&B.m(e,null),D||(V=[H(i,"click",s[15]),H(m,"click",s[16]),H(v,"click",s[17]),H(w,"click",s[8])],D=!0)},p(F,Q){Q&4&&p!==(p="tab-btn "+(F[2]==="text"?"active":"")+" svelte-1ywx8az")&&c(i,"class",p),Q&4&&g!==(g="tab-btn "+(F[2]==="image"?"active":"")+" svelte-1ywx8az")&&c(m,"class",g),Q&4&&O!==(O="tab-btn "+(F[2]==="file"?"active":"")+" svelte-1ywx8az")&&c(v,"class",O),F[2]==="text"?C?C.p(F,Q):(C=De(F),C.c(),C.m(e,A)):C&&(C.d(1),C=null),F[2]==="image"?M?M.p(F,Q):(M=Ae(F),M.c(),M.m(e,J)):M&&(M.d(1),M=null),F[2]==="file"?W?W.p(F,Q):(W=Re(F),W.c(),W.m(e,E)):W&&(W.d(1),W=null),F[7]?R?R.p(F,Q):(R=He(F),R.c(),R.m(e,S)):R&&(R.d(1),R=null),le!==(le=G(F))&&(Y.d(1),Y=le(F),Y&&(Y.c(),Y.m(w,null))),Q&58&&T!==(T=F[5]||!F[1].trim()&&!F[3]&&!F[4])&&(w.disabled=T),F[6].length>0?B?B.p(F,Q):(B=Je(F),B.c(),B.m(e,null)):B&&(B.d(1),B=null)},d(F){F&&y(e),C&&C.d(),M&&M.d(),W&&W.d(),R&&R.d(),Y.d(),B&&B.d(),D=!1,pe(V)}}}function pl(s){let e;return{c(){e=u("h4"),e.textContent="Search Similar Vectors",c(e,"class","txt txt-lg")},m(t,n){k(t,e,n)},p:q,d(t){t&&y(e)}}}function ml(s){let e,t,n={class:"overlay-panel-lg",$$slots:{header:[pl],default:[ul]},$$scope:{ctx:s}};return e=new he({props:n}),s[19](e),e.$on("hide",s[20]),e.$on("show",s[21]),{c(){te(e.$$.fragment)},m(l,a){ee(e,l,a),t=!0},p(l,[a]){const i={};a&536871166&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){Z(e.$$.fragment,l),t=!1},d(l){s[19](null),x(e,l)}}}function _l(s,e,t){ye();let n,l="",a="text",i=null,d=null,r=!1,p=[],_="";function m(){n==null||n.show()}function f(w,T){t(6,p=[]),t(7,_=""),b(w,T)}async function b(w,T){t(5,r=!0),t(7,_=""),t(6,p=[]);try{const I=await _e.send("/api/vectors/search",{method:"POST",body:JSON.stringify({embedding:w,top:10,type:T==="text"?"":T})});t(6,p=I.results||[])}catch(I){console.error("Search error:",I),t(7,_=I.message||"Search failed")}finally{t(5,r=!1)}}async function g(){if(!r){t(5,r=!0),t(7,_=""),t(6,p=[]);try{let w={top:10,type:a==="text"?"":a};if(a==="text"&&l.trim())w.text=l.trim();else if(a==="image"&&i){const I=new FileReader,D=new Promise((V,C)=>{I.onload=()=>V(I.result.split(",")[1]),I.onerror=C,I.readAsDataURL(i)});try{const V=await D;w.imageData=V,console.log("Image converted to base64 for search:",V.substring(0,50)+"...")}catch(V){throw console.error("Failed to convert image to base64:",V),new Error("Failed to process image")}}else if(a==="file"&&d)w.embedding=new Array(384).fill(0).map(()=>Math.random()*2-1),console.warn("File search using placeholder embedding - implement actual file processing");else throw new Error("Please provide search input");const T=await _e.send("/api/vectors/search",{method:"POST",body:JSON.stringify(w)});t(6,p=T.results||[])}catch(w){console.error("Search error:",w),t(7,_=w.message||"Search failed")}finally{t(5,r=!1)}}}function h(w){const T=w.target.files[0];T&&t(3,i=T)}function v(w){const T=w.target.files[0];T&&t(4,d=T)}function P(){t(3,i=null)}function U(){t(4,d=null)}const O=()=>t(2,a="text"),j=()=>t(2,a="image"),A=()=>t(2,a="file");function J(){l=this.value,t(1,l)}function E(w){ne[w?"unshift":"push"](()=>{n=w,t(0,n)})}function S(w){re.call(this,s,w)}function N(w){re.call(this,s,w)}return[n,l,a,i,d,r,p,_,g,h,v,P,U,m,f,O,j,A,J,E,S,N]}class bl extends ce{constructor(e){super(),de(this,e,_l,ml,fe,{show:13,performSearchWithEmbedding:14})}get show(){return this.$$.ctx[13]}get performSearchWithEmbedding(){return this.$$.ctx[14]}}function hl(s){let e,t,n,l,a,i,d,r,p,_,m,f,b,g,h,v,P,U,O,j,A;a=new at({}),a.$on("refresh",s[9]),g=new it({props:{value:"",placeholder:"Search vectors..."}}),g.$on("submit",yl);let J={};return U=new $t({props:J}),s[13](U),U.$on("select",s[14]),U.$on("delete",s[15]),U.$on("new",s[16]),U.$on("countUpdated",s[17]),{c(){e=u("header"),t=u("nav"),t.innerHTML='<div class="breadcrumb-item">Vectors</div>',n=z(),l=u("div"),te(a.$$.fragment),i=z(),d=u("div"),r=u("button"),r.innerHTML='<i class="ri-search-line"></i> <span class="txt">Search Similar</span>',p=z(),_=u("button"),_.innerHTML='<i class="ri-code-s-slash-line"></i> <span class="txt">API Preview</span>',m=z(),f=u("button"),f.innerHTML='<i class="ri-add-line"></i> <span class="txt">New Vector</span>',b=z(),te(g.$$.fragment),h=z(),v=u("div"),P=z(),te(U.$$.fragment),c(t,"class","breadcrumbs"),c(l,"class","inline-flex gap-5"),c(r,"type","button"),c(r,"class","btn btn-outline"),c(_,"type","button"),c(_,"class","btn btn-outline"),c(f,"type","button"),c(f,"class","btn btn-expanded"),c(d,"class","btns-group"),c(e,"class","page-header"),c(v,"class","clearfix m-b-sm")},m(E,S){k(E,e,S),o(e,t),o(e,n),o(e,l),ee(a,l,null),o(e,i),o(e,d),o(d,r),o(d,p),o(d,_),o(d,m),o(d,f),k(E,b,S),ee(g,E,S),k(E,h,S),k(E,v,S),k(E,P,S),ee(U,E,S),O=!0,j||(A=[H(r,"click",s[10]),H(_,"click",s[11]),H(f,"click",s[12])],j=!0)},p(E,S){const N={};U.$set(N)},i(E){O||(X(a.$$.fragment,E),X(g.$$.fragment,E),X(U.$$.fragment,E),O=!0)},o(E){Z(a.$$.fragment,E),Z(g.$$.fragment,E),Z(U.$$.fragment,E),O=!1},d(E){E&&(y(e),y(b),y(h),y(v),y(P)),x(a),x(g,E),s[13](null),x(U,E),j=!1,pe(A)}}}function gl(s){let e,t,n;function l(i){s[8](i)}let a={class:"m-r-auto txt-sm txt-hint"};return s[5]!==void 0&&(a.totalCount=s[5]),e=new tl({props:a}),s[7](e),ne.push(()=>rt(e,"totalCount",l)),{c(){te(e.$$.fragment)},m(i,d){ee(e,i,d),n=!0},p(i,d){const r={};!t&&d&32&&(t=!0,r.totalCount=i[5],ot(()=>t=!1)),e.$set(r)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){s[7](null),x(e,i)}}}function vl(s){let e,t,n,l,a,i,d,r;e=new lt({props:{class:"flex-content",$$slots:{footer:[gl],default:[hl]},$$scope:{ctx:s}}});let p={};n=new jt({props:p}),s[18](n),n.$on("save",s[19]),n.$on("searchSimilar",s[6]);let _={};a=new ht({props:_}),s[20](a);let m={};return d=new bl({props:m}),s[21](d),{c(){te(e.$$.fragment),t=z(),te(n.$$.fragment),l=z(),te(a.$$.fragment),i=z(),te(d.$$.fragment)},m(f,b){ee(e,f,b),k(f,t,b),ee(n,f,b),k(f,l,b),ee(a,f,b),k(f,i,b),ee(d,f,b),r=!0},p(f,[b]){const g={};b&8388671&&(g.$$scope={dirty:b,ctx:f}),e.$set(g);const h={};n.$set(h);const v={};a.$set(v);const P={};d.$set(P)},i(f){r||(X(e.$$.fragment,f),X(n.$$.fragment,f),X(a.$$.fragment,f),X(d.$$.fragment,f),r=!0)},o(f){Z(e.$$.fragment,f),Z(n.$$.fragment,f),Z(a.$$.fragment,f),Z(d.$$.fragment,f),r=!1},d(f){f&&(y(t),y(l),y(i)),x(e,f),s[18](null),x(n,f),s[20](null),x(a,f),s[21](null),x(d,f)}}}const yl=s=>{};function kl(s,e,t){let n;nt(s,ze,w=>t(22,n=w));let l,a,i,d,r,p=0;function _(w){var I;console.log("[PageVectors] handleSearchSimilar called with event:",w),console.log("[PageVectors] event type:",typeof w),console.log("[PageVectors] event keys:",Object.keys(w)),console.log("[PageVectors] event detail property exists:","detail"in w),console.log("[PageVectors] event.detail value:",w.detail),console.log("[PageVectors] event.detail type:",typeof w.detail),w.detail&&(console.log("[PageVectors] event.detail keys:",Object.keys(w.detail)),console.log("[PageVectors] event.detail values:",JSON.stringify(w.detail)));const T=w.detail;if(console.log("[PageVectors] eventDetail:",T),!T){console.error("[PageVectors] No event detail provided"),alert("Error: No vector data provided for similarity search.");return}if(!T.embedding){console.error("[PageVectors] No embedding in event detail, detail:",T),alert("Error: Vector has no embedding data for similarity search.");return}if(!T.type){console.error("[PageVectors] No type in event detail, detail:",T),alert("Error: Vector type not specified for similarity search.");return}console.log("[PageVectors] Opening search panel with embedding:",(I=T.embedding)==null?void 0:I.length,"dimensions, type:",T.type),i==null||i.show(),setTimeout(()=>{try{i==null||i.performSearchWithEmbedding(T.embedding,T.type),console.log("[PageVectors] Search initiated successfully")}catch(D){console.error("[PageVectors] Error performing search:",D),alert("Error: Failed to perform similarity search.")}},100)}function m(w){ne[w?"unshift":"push"](()=>{r=w,t(4,r)})}function f(w){p=w,t(5,p)}const b=()=>{d==null||d.load(),r==null||r.reload()},g=()=>i==null?void 0:i.show(),h=()=>a==null?void 0:a.show(),v=()=>l==null?void 0:l.show();function P(w){ne[w?"unshift":"push"](()=>{d=w,t(3,d)})}const U=w=>{l==null||l.show(w.detail)},O=()=>{d==null||d.load()},j=()=>l==null?void 0:l.show(),A=w=>{r==null||r.updateCount(w.detail.count)};function J(w){ne[w?"unshift":"push"](()=>{l=w,t(0,l)})}const E=()=>{setTimeout(()=>{d==null||d.load()},100)};function S(w){ne[w?"unshift":"push"](()=>{a=w,t(1,a)})}function N(w){ne[w?"unshift":"push"](()=>{i=w,t(2,i)})}return st(ze,n="Vectors",n),[l,a,i,d,r,p,_,m,f,b,g,h,v,P,U,O,j,A,J,E,S,N]}class zl extends ce{constructor(e){super(),de(this,e,kl,vl,fe,{})}}export{zl as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UploadApiDocs-KwpTzpbf.js","./index-BXdnPgBO.js","./index-wnKjfGML.css","./ListApiDocs-CasaZMc9.js","./ViewApiDocs-H5svjZn4.js","./DeleteApiDocs-DRi5l3Yc.js","./DownloadApiDocs-BzyFLeie.js"])))=>i.map(i=>d[i]);
import{S as We,i as Qe,s as qe,O as Ye,d as le,t as H,a as A,m as ne,c as ie,_ as oe,L as x,h as m,M as we,N as Ze,C as pe,P as xe,D as de,l as b,n as h,u as d,v as M,w as c,H as I,o as V,y as ge,Q as ke,k as ue,R as se,T as et,U as tt,V as $e,p as ee,W as lt,X as nt,Y as it,Z as Ge,j as _e,$ as ve,I as re,A as q,J as be,K as he,x as st,E as Ke,a0 as Je,a1 as rt,a2 as fe,a3 as Te,a4 as Pe,a5 as ot,a6 as De}from"./index-BXdnPgBO.js";function Me(l,e,t){const n=l.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function at(l){l[15]=l[16].default}function Ce(l,e,t){const n=l.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function Fe(l,e){let t,n,i;function o(){return e[7](e[11])}return{key:l,first:null,c(){t=d("button"),t.textContent=`${e[12].label} `,c(t,"type","button"),c(t,"class","sidebar-item svelte-mnp6dl"),ue(t,"active",e[3]===e[11]),this.first=t},m(s,a){b(s,t,a),n||(i=V(t,"click",o),n=!0)},p(s,a){e=s,a&24&&ue(t,"active",e[3]===e[11])},d(s){s&&m(t),n=!1,i()}}}function Le(l){let e,t,n={ctx:l,current:null,token:null,hasCatch:!1,pending:ft,then:ut,catch:ct,value:16,blocks:[,,,]};return et(l[12].component,n),{c(){e=se(),n.block.c()},m(i,o){b(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,o){l=i},i(i){t||(A(n.block),t=!0)},o(i){for(let o=0;o<3;o+=1){const s=n.blocks[o];H(s)}t=!1},d(i){i&&m(e),n.block.d(i),n.token=null,n=null}}}function ct(l){return{c:I,m:I,i:I,o:I,d:I}}function ut(l){at(l);let e,t,n;return e=new l[15]({}),{c(){ie(e.$$.fragment),t=M()},m(i,o){ne(e,i,o),b(i,t,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){i&&m(t),le(e,i)}}}function ft(l){return{c:I,m:I,i:I,o:I,d:I}}function Ue(l,e){let t,n,i,o=e[3]===e[11]&&Le(e);return{key:l,first:null,c(){t=se(),o&&o.c(),n=se(),this.first=t},m(s,a){b(s,t,a),o&&o.m(s,a),b(s,n,a),i=!0},p(s,a){e=s,e[3]===e[11]?o?(o.p(e,a),a&8&&A(o,1)):(o=Le(e),o.c(),A(o,1),o.m(n.parentNode,n)):o&&(pe(),H(o,1,1,()=>{o=null}),de())},i(s){i||(A(o),i=!0)},o(s){H(o),i=!1},d(s){s&&(m(t),m(n)),o&&o.d(s)}}}function pt(l){let e,t,n,i=[],o=new Map,s,a,r=[],f=new Map,g,y=x(Object.entries(l[4]));const w=p=>p[11];for(let p=0;p<y.length;p+=1){let k=Ce(l,y,p),v=w(k);o.set(v,i[p]=Fe(v,k))}let D=x(Object.entries(l[4]));const $=p=>p[11];for(let p=0;p<D.length;p+=1){let k=Me(l,D,p),v=$(k);f.set(v,r[p]=Ue(v,k))}return{c(){e=d("div"),t=d("aside"),n=d("nav");for(let p=0;p<i.length;p+=1)i[p].c();s=M(),a=d("div");for(let p=0;p<r.length;p+=1)r[p].c();c(n,"class","sidebar-content svelte-mnp6dl"),c(t,"class","docs-sidebar svelte-mnp6dl"),c(a,"class","docs-content svelte-mnp6dl"),c(e,"class","docs-content-wrapper svelte-mnp6dl")},m(p,k){b(p,e,k),h(e,t),h(t,n);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(n,null);h(e,s),h(e,a);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(a,null);g=!0},p(p,k){k&26&&(y=x(Object.entries(p[4])),i=we(i,k,w,1,p,y,o,n,Ze,Fe,null,Ce)),k&24&&(D=x(Object.entries(p[4])),pe(),r=we(r,k,$,1,p,D,f,a,xe,Ue,null,Me),de())},i(p){if(!g){for(let k=0;k<D.length;k+=1)A(r[k]);g=!0}},o(p){for(let k=0;k<r.length;k+=1)H(r[k]);g=!1},d(p){p&&m(e);for(let k=0;k<i.length;k+=1)i[k].d();for(let k=0;k<r.length;k+=1)r[k].d()}}}function dt(l){let e,t,n;return{c(){e=d("button"),e.innerHTML='<span class="txt">Close</span>',c(e,"type","button"),c(e,"class","btn btn-transparent")},m(i,o){b(i,e,o),t||(n=V(e,"click",l[6]),t=!0)},p:I,d(i){i&&m(e),t=!1,n()}}}function _t(l){let e,t,n={class:"docs-panel",$$slots:{footer:[dt],default:[pt]},$$scope:{ctx:l}};return e=new Ye({props:n}),l[8](e),e.$on("hide",l[9]),e.$on("show",l[10]),{c(){ie(e.$$.fragment)},m(i,o){ne(e,i,o),t=!0},p(i,[o]){const s={};o&524296&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){t||(A(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){l[8](null),le(e,i)}}}function mt(l,e,t){const n={upload:{label:"Upload",component:oe(()=>import("./UploadApiDocs-KwpTzpbf.js"),__vite__mapDeps([0,1,2]),import.meta.url)},list:{label:"List",component:oe(()=>import("./ListApiDocs-CasaZMc9.js"),__vite__mapDeps([3,1,2]),import.meta.url)},view:{label:"View",component:oe(()=>import("./ViewApiDocs-H5svjZn4.js"),__vite__mapDeps([4,1,2]),import.meta.url)},delete:{label:"Delete",component:oe(()=>import("./DeleteApiDocs-DRi5l3Yc.js"),__vite__mapDeps([5,1,2]),import.meta.url)},download:{label:"Download",component:oe(()=>import("./DownloadApiDocs-BzyFLeie.js"),__vite__mapDeps([6,1,2]),import.meta.url)}};let i,o;n&&(o=Object.keys(n)[0]);function s(){return r(Object.keys(n)[0]),i==null?void 0:i.show()}function a(){return i==null?void 0:i.hide()}function r($){t(3,o=$)}const f=()=>a(),g=$=>r($);function y($){ge[$?"unshift":"push"](()=>{i=$,t(2,i)})}function w($){ke.call(this,l,$)}function D($){ke.call(this,l,$)}return[a,r,i,o,n,s,f,g,y,w,D]}class bt extends We{constructor(e){super(),Qe(this,e,mt,_t,qe,{show:5,hide:0,changeTab:1})}get show(){return this.$$.ctx[5]}get hide(){return this.$$.ctx[0]}get changeTab(){return this.$$.ctx[1]}}function Ie(l,e,t){const n=l.slice();return n[36]=e[t],n}function Se(l,e,t){const n=l.slice();return n[39]=e[t],n[41]=t,n}function ht(l){let e;return{c(){e=d("span"),e.textContent="/",c(e,"class","breadcrumb-separator svelte-1uu55ur")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function gt(l){let e,t,n;function i(){return l[23](l[39])}return{c(){e=d("button"),e.textContent=`${l[39].name} `,c(e,"class","breadcrumb-item link svelte-1uu55ur")},m(o,s){b(o,e,s),t||(n=V(e,"click",i),t=!0)},p(o,s){l=o},d(o){o&&m(e),t=!1,n()}}}function kt(l){let e;return{c(){e=d("div"),e.textContent=`${l[39].name}`,c(e,"class","breadcrumb-item current svelte-1uu55ur")},m(t,n){b(t,e,n)},p:I,d(t){t&&m(e)}}}function Oe(l){let e,t,n=l[41]>0&&ht();function i(a,r){return a[39].path===a[0]?kt:gt}let o=i(l),s=o(l);return{c(){n&&n.c(),e=M(),s.c(),t=se()},m(a,r){n&&n.m(a,r),b(a,e,r),s.m(a,r),b(a,t,r)},p(a,r){o===(o=i(a))&&s?s.p(a,r):(s.d(1),s=o(a),s&&(s.c(),s.m(t.parentNode,t)))},d(a){a&&(m(e),m(t)),n&&n.d(a),s.d(a)}}}function Re(l){let e,t,n;return{c(){e=d("button"),e.innerHTML='<i class="ri-arrow-up-line"></i>',c(e,"type","button"),c(e,"aria-label","Go to parent directory"),c(e,"class","btn btn-transparent btn-circle")},m(i,o){b(i,e,o),t||(n=[Ke(Je.call(null,e,{text:"Go to parent directory",position:"right"})),V(e,"click",l[10])],t=!0)},p:I,d(i){i&&m(e),t=!1,_e(n)}}}function Ae(l){let e,t,n,i,o,s,a,r=Math.round(l[4])+"",f,g;return{c(){e=d("div"),t=d("div"),n=d("div"),i=M(),o=d("div"),s=d("span"),a=q("Uploading... "),f=q(r),g=q("%"),c(n,"class","upload-progress-fill svelte-1uu55ur"),ve(n,"width",l[4]+"%"),c(t,"class","upload-progress-bar svelte-1uu55ur"),c(s,"class","txt-sm"),c(o,"class","upload-progress-text svelte-1uu55ur"),c(e,"class","upload-progress svelte-1uu55ur")},m(y,w){b(y,e,w),h(e,t),h(t,n),h(e,i),h(e,o),h(o,s),h(s,a),h(s,f),h(s,g)},p(y,w){w[0]&16&&ve(n,"width",y[4]+"%"),w[0]&16&&r!==(r=Math.round(y[4])+"")&&re(f,r)},d(y){y&&m(e)}}}function vt(l){let e,t,n=x(l[1]),i=[];for(let s=0;s<n.length;s+=1)i[s]=ze(Ie(l,n,s));const o=s=>H(i[s],1,1,()=>{i[s]=null});return{c(){e=d("div");for(let s=0;s<i.length;s+=1)i[s].c();c(e,"class","files-grid svelte-1uu55ur")},m(s,a){b(s,e,a);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);t=!0},p(s,a){if(a[0]&466946){n=x(s[1]);let r;for(r=0;r<n.length;r+=1){const f=Ie(s,n,r);i[r]?(i[r].p(f,a),A(i[r],1)):(i[r]=ze(f),i[r].c(),A(i[r],1),i[r].m(e,null))}for(pe(),r=n.length;r<i.length;r+=1)o(r);de()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)A(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)H(i[a]);t=!1},d(s){s&&m(e),Ge(i,s)}}}function yt(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="icon icon-lg txt-hint m-b-base"><i class="ri-folder-open-line"></i></div> <h3 class="txt-hint">No files found</h3> <p class="txt-hint">This directory is empty.</p>',c(e,"class","text-center p-lg")},m(t,n){b(t,e,n)},p:I,i:I,o:I,d(t){t&&m(e)}}}function wt(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="loader"></span> <div class="txt-hint m-t-sm">Loading files...</div>',c(e,"class","text-center p-lg")},m(t,n){b(t,e,n)},p:I,i:I,o:I,d(t){t&&m(e)}}}function $t(l){let e,t;return{c(){e=d("i"),c(e,"class",t=Pe(Ne(l[36]))+" svelte-1uu55ur")},m(n,i){b(n,e,i)},p(n,i){i[0]&2&&t!==(t=Pe(Ne(n[36]))+" svelte-1uu55ur")&&c(e,"class",t)},d(n){n&&m(e)}}}function Tt(l){let e,t,n;return{c(){e=d("img"),Te(e.src,t=Ve(l[36]))||c(e,"src",t),c(e,"alt",n=l[36].original_name||l[36].name),c(e,"class","file-preview svelte-1uu55ur"),c(e,"loading","lazy")},m(i,o){b(i,e,o)},p(i,o){o[0]&2&&!Te(e.src,t=Ve(i[36]))&&c(e,"src",t),o[0]&2&&n!==(n=i[36].original_name||i[36].name)&&c(e,"alt",n)},d(i){i&&m(e)}}}function Pt(l){let e,t=Be(l[36].size)+"",n,i,o,s,a=l[36].mime&&Ee(l),r=l[36].protected&&He();return{c(){e=d("span"),n=q(t),i=M(),a&&a.c(),o=M(),r&&r.c(),s=se(),c(e,"class","txt-hint")},m(f,g){b(f,e,g),h(e,n),b(f,i,g),a&&a.m(f,g),b(f,o,g),r&&r.m(f,g),b(f,s,g)},p(f,g){g[0]&2&&t!==(t=Be(f[36].size)+"")&&re(n,t),f[36].mime?a?a.p(f,g):(a=Ee(f),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null),f[36].protected?r||(r=He(),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(f){f&&(m(e),m(i),m(o),m(s)),a&&a.d(f),r&&r.d(f)}}}function Dt(l){let e;return{c(){e=d("span"),e.textContent="Directory",c(e,"class","txt-hint")},m(t,n){b(t,e,n)},p:I,d(t){t&&m(e)}}}function Ee(l){var s;let e,t,n,i=((s=l[36].mime.split("/")[1])==null?void 0:s.toUpperCase())+"",o;return{c(){e=d("span"),e.textContent="•",t=M(),n=d("span"),o=q(i),c(e,"class","txt-hint"),c(n,"class","txt-hint")},m(a,r){b(a,e,r),b(a,t,r),b(a,n,r),h(n,o)},p(a,r){var f;r[0]&2&&i!==(i=((f=a[36].mime.split("/")[1])==null?void 0:f.toUpperCase())+"")&&re(o,i)},d(a){a&&(m(e),m(t),m(n))}}}function He(l){let e,t,n;return{c(){e=d("span"),e.textContent="•",t=M(),n=d("span"),n.textContent="Protected",c(e,"class","txt-hint"),c(n,"class","txt-warning")},m(i,o){b(i,e,o),b(i,t,o),b(i,n,o)},d(i){i&&(m(e),m(t),m(n))}}}function je(l){let e,t,n,i,o;function s(){return l[29](l[36])}return{c(){e=d("hr"),t=M(),n=d("button"),n.innerHTML='<i class="ri-delete-bin-7-line"></i> <span class="txt">Delete</span>',c(n,"type","button"),c(n,"class","dropdown-item txt-danger closable")},m(a,r){b(a,e,r),b(a,t,r),b(a,n,r),i||(o=V(n,"click",fe(s)),i=!0)},p(a,r){l=a},d(a){a&&(m(e),m(t),m(n)),i=!1,o()}}}function Mt(l){var y;let e,t,n,i,o,s,a;function r(){return l[27](l[36])}function f(){return l[28](l[36])}let g=(l[36].created_by===((y=ee.authStore.record)==null?void 0:y.id)||ee.authStore.isSuperuser)&&je(l);return{c(){e=d("button"),e.innerHTML='<i class="ri-clipboard-line"></i> <span class="txt">Copy ID</span>',t=M(),n=d("button"),n.innerHTML='<i class="ri-link"></i> <span class="txt">Copy URL</span>',i=M(),g&&g.c(),o=se(),c(e,"type","button"),c(e,"class","dropdown-item closable"),c(n,"type","button"),c(n,"class","dropdown-item closable")},m(w,D){b(w,e,D),b(w,t,D),b(w,n,D),b(w,i,D),g&&g.m(w,D),b(w,o,D),s||(a=[V(e,"click",fe(r)),V(n,"click",fe(f))],s=!0)},p(w,D){var $;l=w,l[36].created_by===(($=ee.authStore.record)==null?void 0:$.id)||ee.authStore.isSuperuser?g?g.p(l,D):(g=je(l),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null)},d(w){w&&(m(e),m(t),m(n),m(i),m(o)),g&&g.d(w),s=!1,_e(a)}}}function ze(l){let e,t,n,i,o,s,a=(l[36].original_name||l[36].name)+"",r,f,g,y,w,D,$,p,k,v,Z,O,G,K;function z(F,P){return P[0]&2&&(n=null),n==null&&(n=!!Xe(F[36])),n?Tt:$t}let L=z(l,[-1,-1]),C=L(l);function W(F,P){return F[36].isDirectory?Dt:Pt}let B=W(l),R=B(l);v=new rt({props:{class:"dropdown dropdown-right dropdown-nowrap",$$slots:{default:[Mt]},$$scope:{ctx:l}}});function te(){return l[30](l[36])}return{c(){e=d("div"),t=d("div"),C.c(),i=M(),o=d("div"),s=d("div"),r=q(a),g=M(),y=d("div"),R.c(),w=M(),D=d("div"),$=d("button"),p=d("i"),k=M(),ie(v.$$.fragment),Z=M(),c(t,"class","file-icon svelte-1uu55ur"),c(s,"class","file-name svelte-1uu55ur"),c(s,"title",f=l[36].original_name||l[36].name),c(y,"class","file-meta svelte-1uu55ur"),c(o,"class","file-info svelte-1uu55ur"),c(p,"class","ri-more-line"),c($,"type","button"),c($,"class","btn btn-transparent btn-sm"),c(D,"class","file-actions svelte-1uu55ur"),c(e,"class","file-item svelte-1uu55ur"),c(e,"role","button"),c(e,"tabindex","0"),ue(e,"directory",l[36].isDirectory)},m(F,P){b(F,e,P),h(e,t),C.m(t,null),h(e,i),h(e,o),h(o,s),h(s,r),h(o,g),h(o,y),R.m(y,null),h(e,w),h(e,D),h(D,$),h($,p),h($,k),ne(v,$,null),h(e,Z),O=!0,G||(K=[Ke(Je.call(null,$,{text:"More actions"})),V($,"click",fe(l[22])),V(e,"click",te)],G=!0)},p(F,P){l=F,L===(L=z(l,P))&&C?C.p(l,P):(C.d(1),C=L(l),C&&(C.c(),C.m(t,null))),(!O||P[0]&2)&&a!==(a=(l[36].original_name||l[36].name)+"")&&re(r,a),(!O||P[0]&2&&f!==(f=l[36].original_name||l[36].name))&&c(s,"title",f),B===(B=W(l))&&R?R.p(l,P):(R.d(1),R=B(l),R&&(R.c(),R.m(y,null)));const S={};P[0]&2|P[1]&2048&&(S.$$scope={dirty:P,ctx:l}),v.$set(S),(!O||P[0]&2)&&ue(e,"directory",l[36].isDirectory)},i(F){O||(A(v.$$.fragment,F),O=!0)},o(F){H(v.$$.fragment,F),O=!1},d(F){F&&m(e),C.d(),R.d(),le(v),G=!1,_e(K)}}}function Ct(l){let e,t,n,i,o,s,a,r,f,g,y,w,D,$,p,k,v,Z,O,G,K,z,L,C,W,B,R,te,F=x(l[11]()),P=[];for(let _=0;_<F.length;_+=1)P[_]=Oe(Se(l,F,_));let S=l[0]!=="/"&&Re(l);s=new nt({}),s.$on("refresh",l[9]);let E=l[3]&&Ae(l);O=new it({props:{value:l[6],placeholder:"Search files..."}}),O.$on("submit",l[26]);const ae=[wt,yt,vt],Q=[];function ce(_,U){return _[2]?0:_[1].length===0?1:2}return L=ce(l),C=Q[L]=ae[L](l),{c(){e=d("header"),t=d("nav");for(let _=0;_<P.length;_+=1)P[_].c();n=M(),i=d("div"),S&&S.c(),o=M(),ie(s.$$.fragment),a=M(),r=d("div"),f=d("button"),f.innerHTML='<i class="ri-code-s-slash-line"></i> <span class="txt">API Preview</span>',g=M(),y=d("button"),w=d("i"),D=M(),$=d("span"),$.textContent="Upload Files",p=M(),E&&E.c(),k=M(),v=d("input"),Z=M(),ie(O.$$.fragment),G=M(),K=d("div"),z=M(),C.c(),W=se(),c(t,"class","breadcrumbs"),c(i,"class","inline-flex gap-5"),c(f,"type","button"),c(f,"class","btn btn-outline"),c(w,"class","ri-upload-line"),c($,"class","txt"),c(y,"type","button"),c(y,"class","btn btn-expanded"),y.disabled=l[3],c(r,"class","btns-group"),c(v,"type","file"),v.multiple=!0,ve(v,"display","none"),c(e,"class","page-header"),c(K,"class","clearfix m-b-sm")},m(_,U){b(_,e,U),h(e,t);for(let J=0;J<P.length;J+=1)P[J]&&P[J].m(t,null);h(e,n),h(e,i),S&&S.m(i,null),h(i,o),ne(s,i,null),h(e,a),h(e,r),h(r,f),h(r,g),h(r,y),h(y,w),h(y,D),h(y,$),h(e,p),E&&E.m(e,null),h(e,k),h(e,v),l[25](v),b(_,Z,U),ne(O,_,U),b(_,G,U),b(_,K,U),b(_,z,U),Q[L].m(_,U),b(_,W,U),B=!0,R||(te=[V(f,"click",l[24]),V(y,"click",l[14]),V(v,"change",l[15])],R=!0)},p(_,U){if(U[0]&6657){F=x(_[11]());let T;for(T=0;T<F.length;T+=1){const N=Se(_,F,T);P[T]?P[T].p(N,U):(P[T]=Oe(N),P[T].c(),P[T].m(t,null))}for(;T<P.length;T+=1)P[T].d(1);P.length=F.length}_[0]!=="/"?S?S.p(_,U):(S=Re(_),S.c(),S.m(i,o)):S&&(S.d(1),S=null),(!B||U[0]&8)&&(y.disabled=_[3]),_[3]?E?E.p(_,U):(E=Ae(_),E.c(),E.m(e,k)):E&&(E.d(1),E=null);const J={};U[0]&64&&(J.value=_[6]),O.$set(J);let u=L;L=ce(_),L===u?Q[L].p(_,U):(pe(),H(Q[u],1,1,()=>{Q[u]=null}),de(),C=Q[L],C?C.p(_,U):(C=Q[L]=ae[L](_),C.c()),A(C,1),C.m(W.parentNode,W))},i(_){B||(A(s.$$.fragment,_),A(O.$$.fragment,_),A(C),B=!0)},o(_){H(s.$$.fragment,_),H(O.$$.fragment,_),H(C),B=!1},d(_){_&&(m(e),m(Z),m(G),m(K),m(z),m(W)),Ge(P,_),S&&S.d(),le(s),E&&E.d(),l[25](null),le(O,_),Q[L].d(_),R=!1,_e(te)}}}function Ft(l){let e,t,n,i=l[5]!==1?"s":"",o,s;return{c(){e=d("div"),t=q(l[5]),n=q(" file"),o=q(i),s=q(" total"),c(e,"class","txt-sm txt-hint")},m(a,r){b(a,e,r),h(e,t),h(e,n),h(e,o),h(e,s)},p(a,r){r[0]&32&&re(t,a[5]),r[0]&32&&i!==(i=a[5]!==1?"s":"")&&re(o,i)},d(a){a&&m(e)}}}function Lt(l){let e,t,n,i;e=new tt({props:{class:"flex-content",$$slots:{footer:[Ft],default:[Ct]},$$scope:{ctx:l}}});let o={};return n=new bt({props:o}),l[31](n),{c(){ie(e.$$.fragment),t=M(),ie(n.$$.fragment)},m(s,a){ne(e,s,a),b(s,t,a),ne(n,s,a),i=!0},p(s,a){const r={};a[0]&511|a[1]&2048&&(r.$$scope={dirty:a,ctx:s}),e.$set(r);const f={};n.$set(f)},i(s){i||(A(e.$$.fragment,s),A(n.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(n.$$.fragment,s),i=!1},d(s){s&&m(t),le(e,s),l[31](null),le(n,s)}}}function Be(l){if(!l)return"";const e=["B","KB","MB","GB"],t=Math.floor(Math.log(l)/Math.log(1024));return Math.round(l/Math.pow(1024,t)*100)/100+" "+e[t]}function Ne(l){if(l.isDirectory)return"ri-folder-line";const e=l.mime||"";return e.startsWith("image/")?"ri-image-line":e.startsWith("video/")?"ri-video-line":e.startsWith("audio/")?"ri-music-line":e.includes("pdf")?"ri-file-pdf-line":e.includes("zip")||e.includes("rar")?"ri-file-zip-line":e.includes("text")?"ri-file-text-line":"ri-file-line"}function Xe(l){return l.mime&&l.mime.startsWith("image/")}function Ve(l){return Xe(l)?`/api/files/${l.id}/${l.stored_name}`:null}function Ut(l,e,t){let n,i,o,s;$e(l,ot,u=>t(21,o=u)),$e(l,De,u=>t(32,s=u));const a=new URLSearchParams(o);let r=a.get("path")||"/",f=[],g=!1,y=!1,w=0,D=0,$=a.get("filter")||"",p,k;v();async function v(){if(!g){t(2,g=!0);try{const u=await ee.files.getList({page:1,perPage:1e3,filter:$||""});t(1,f=u.items||[]),t(5,D=u.totalItems||0),Z()}catch(u){console.warn("Failed to load files:",u),t(1,f=[]),t(5,D=0)}finally{t(2,g=!1)}}}function Z(){const u=new Map,T=new Map;f.forEach(j=>{const Y=j.directory||"/";u.has(Y)||(u.set(Y,[]),T.set(Y,!0)),u.get(Y).push(j)});const N=u.get(r)||[],X=Array.from(T.keys()).filter(j=>j.startsWith(r)&&j!==r).map(j=>j.substring(r==="/"?1:r.length+1).split("/")[0]).filter((j,Y,me)=>me.indexOf(j)===Y).map(j=>({id:`dir_${j}`,name:j,type:"directory",size:0,created_at:null,isDirectory:!0}));t(1,f=[...X,...N])}function O(u){const T=r==="/"?`/${u}`:`${r}/${u}`;t(0,r=T),z(),v()}function G(){if(r==="/")return;const u=r.split("/");u.pop(),t(0,r=u.length<=1?"/":u.join("/")),z(),v()}function K(){if(r==="/")return[{name:"Root",path:"/"}];const u=r.split("/").filter(X=>X),T=[{name:"Root",path:"/"}];let N="";return u.forEach(X=>{N+="/"+X,T.push({name:X,path:N})}),T}function z(){be.replaceHashQueryParams({path:r,filter:$})}function L(u){if(u.isDirectory)O(u.name);else{const T=`/api/files/${u.id}/${u.stored_name}`;window.open(T,"_blank")}}function C(){p==null||p.click()}async function W(u){const T=Array.from(u.target.files);if(T.length!==0){t(3,y=!0),t(4,w=0);try{const N=T.map(async(X,j)=>{const Y=new FormData;Y.append("files",X),console.log("Uploading file:",X.name);const me=setInterval(()=>{w<90&&t(4,w+=Math.random()*10)},200),ye=await ee.files.upload(Y);return clearInterval(me),t(4,w=(j+1)/T.length*100),console.log("Upload response:",ye),ye});await Promise.all(N),t(4,w=100),setTimeout(()=>{p&&t(7,p.value="",p),v()},500)}catch(N){console.error("Failed to upload files:",N),alert(`Upload failed: ${N.message||"Unknown error"}`)}finally{setTimeout(()=>{t(3,y=!1),t(4,w=0)},1e3)}}}function B(u){be.copyToClipboard(u.id),he("File ID copied to clipboard!")}function R(u){const T=`${window.location.origin}/api/files/${u.id}/${u.stored_name}`;be.copyToClipboard(T),he("File URL copied to clipboard!")}function te(u){console.log("Attempting to delete file:",u.id,u.original_name),st(`Are you sure you want to delete "${u.original_name||u.name}"?`,async()=>{console.log("User confirmed deletion");try{console.log("Calling API to delete file:",u.id);const T=await ee.files.delete(u.id);console.log("Delete API result:",T),he("File deleted successfully!"),console.log("Refreshing file list"),v()}catch(T){console.error("Failed to delete file:",T),ee.error(T)}},()=>{console.log("User cancelled deletion")})}function F(u){ke.call(this,l,u)}const P=u=>{t(0,r=u.path),z(),v()},S=()=>k==null?void 0:k.show();function E(u){ge[u?"unshift":"push"](()=>{p=u,t(7,p)})}const ae=u=>{t(6,$=u.detail),z(),v()},Q=u=>B(u),ce=u=>R(u),_=u=>te(u),U=u=>L(u);function J(u){ge[u?"unshift":"push"](()=>{k=u,t(8,k)})}return l.$$.update=()=>{l.$$.dirty[0]&2097152&&t(20,n=new URLSearchParams(o)),l.$$.dirty[0]&1048576&&t(19,i=n.get("path")),l.$$.dirty[0]&524289&&i&&i!=r&&(t(0,r=i),v())},lt(De,s="Files",s),z(),[r,f,g,y,w,D,$,p,k,v,G,K,z,L,C,W,B,R,te,i,n,o,F,P,S,E,ae,Q,ce,_,U,J]}class St extends We{constructor(e){super(),Qe(this,e,Ut,Lt,qe,{},null,[-1,-1])}}export{St as default};
